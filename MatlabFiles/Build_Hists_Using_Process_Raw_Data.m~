%% Get MVC
mvc = 100;
raw_filepath = '../LabviewFiles/Data/Sistania_Precision/MVC 1RawEMG.csv';
processRawData;
windowWidth = 500; %samples
mvc = max(movmean(smooth_data,windowWidth));


smooth = cell(6,1);

combineTrials = true;
if combineTrials
    trialNumbers = [5 16 20; 6 12 18; 7 15 17; 8 11 21; 9 14 19; 10 13 17];%5, 8, 10, 12, 15, 20
    for i = 1:5
        for j = 1:3
            trialNum = trialNumbers(i,j);
            if trialNum > 9
                raw_filepath = ['../LabviewFiles/Data/Sistania_Precision/Trial' num2str(trialNum) '_RawData.csv'];
            else
                raw_filepath = ['../LabviewFiles/Data/Sistania_Precision/Trial0' num2str(trialNum) '_RawData.csv'];
            end
            processRawData;
            smooth(i,1) = {[smooth{i,1} smooth_data]};    %append trials of equal target activation
        end
    end
else
    for i = 1:5 %5,6,7,8,9 trials
        raw_filepath = ['../LabviewFiles/Data/Sistania_Precision/Trial0' num2str(i+4) '_RawData.csv'];
        processRawData;
        smooth(i,1) = {smooth_data};
    end
    raw_filepath = '../LabviewFiles/Data/Sistania_Precision/Trial10_RawData.csv';
    processRawData;
    smooth(6,1) = {smooth_data};
end


close all;
%Do histograms
figure(1);
hold on;
for i = 1:6
    histfit(smooth{i,1});
    size(smooth{i,1})
end


figure(2)
hold on
boxplot([smooth{1,1} smooth{2,1} smooth{3,1} smooth{4,1} smooth{5,1} smooth{6,1}]);
title('EMG Activation Distribution Across Targets 5%, 8%, 10%, 12%, 15%, and 20%');


